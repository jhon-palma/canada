{% load static %}{% load tags %}{% load humanize %}{% include 'web/header_web.html' %}

<section class="banner">
	<div class="baninfo">
		<h1>{{ labels.index.title.one }} <br><span>{{ labels.index.title.two }}</span> {{ labels.index.title.three }}</h1>
		<form method="GET" id="formserach" action="{% url 'web:search' language=language %}">
			<input type="hidden" name="Codelang" value="{{ language }}">
			<input type="radio" name="status" id="forwhat1" value="1" checked>
			<label for="forwhat1" class="tablabel">{{ labels.index.sale }}</label>
			<input type="radio" name="status" id="forwhat2" value="2">
			<label for="forwhat2" class="tablabel">{{ labels.index.rent }}</label>
			<div class="searchbarcont">
				<input type="search" placeholder="{{ labels.index.placeholder.one }}" id="fserach" name="fserach">
				<div id="freeform-filters" class="filters-list">
					<ul></ul>
				</div>
				<div class="submitcont"><input type="submit" value="{{ labels.index.button.one }}"></div>
			</div>
		</form>
	</div>
	<img src="{% static 'web/images2/small-banner.jpg' %}" alt="View of Montreal" class="bannerimg">
</section>

<section class="statshome">
	<div class="wrap">
		<h2 class="h2def"><span>{{ labels.index.text.one }}</span> {{ labels.index.text.two }}</h2>
		<div class="statscont">
			<div class="statblock">
				<div class="img"><img src="{% static 'web/images2/ico-cta1.png' %}" alt="Icon" /></div>
				<h3 class="h2def">{{ labels.index.text.three }} <span>{{ labels.index.text.four }}</span></h3>
				<div class="statels">
					<div class="statel">
						<p>2021</p>
						<p><span class="num">102.88</span>%</p>
					</div>
					<div class="statel">
						<p>2022</p>
						<p><span class="num">102.58</span>%</p>
					</div>
				</div>
			</div>
			<div class="statblock">
				<div class="img"><img src="{% static 'web/images2/ico-cta2.png' %}" alt="Icon" /></div>
				<h3 class="h2def">{{ labels.index.text.five }} <span>{{ labels.index.text.six }}</span></h3>
				<div class="statels">
					<div class="statel">
						<p>2021</p>
						<p><span class="num">14.5</span> {{ labels.index.text.nine }}</p>
					</div>
					<div class="statel">
						<p>2022</p>
						<p><span class="num">17.76</span> {{ labels.index.text.nine }}</p>
					</div>
				</div>
			</div>
			<div class="statblock">
				<div class="img"><img src="{% static 'web/images2/ico-cta3.png' %}" alt="Icon" /></div>
				<h3 class="h2def">{{ labels.index.text.seven }} <span>{{ labels.index.text.eight }}</span></h3>
				<div class="statels">
					<div class="statel">
						<p>2021</p>
						<p><span class="num">152</span></p>
					</div>
					<div class="statel">
						<p>2022</p>
						<p><span class="num">117</span></p>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="profilhome">
    <div class="wrap">
        <div class="img"><img src="{% static 'web/images2/ljrealties_team.jpg' %}" alt="LJ Immobilier"></div>
        <div class="txt">
            <h2 class='h2def'><span>{{ labels.index.text.ten }}</span> {{ labels.index.text.eleven }}</h2>
			<p>{{ labels.index.text.twelve }}</p>
            <a href="{{ server|server_url }}/{{ language }}/real-estate-broker/" class="bouton">{{ labels.index.button.two }}</a>
            <a href="{{ server|server_url }}/{{ language }}/contact-realestate-broker/" class="bouton bouton2">{{ labels.index.button.three }}</a>
        </div>
    </div>
</section>

{% if inscriptions %}
    <section class="prophome">
        <div class="wrap">
            <h2 class="h2def"><span>{{ labels.index.text.one }}</span> {{ labels.index.text.thirteen }}</h2>
            <div class="propcont">
                {% for inscription in inscriptions %}
                    <a href="" class="propa">
                        <span class="img">
                            {% for photo in inscription.photos.all %}
                                {% if photo.seq == 1 %}
                                    <img src="{{ photo.photourl }}" alt="{% if language == 'en' %}{{ inscription.genre_propriete.description_anglaise }}{% else %}{{ inscription.genre_propriete.description_francaise }}{% endif %}
{% if inscription.prix_demande %}{% if language == 'en' %} for sale{% else %}à vendre {% endif %}{% endif %}{% if inscription.prix_location_demande %}
{% if language == 'en' %}for rent{% else %}à louer{% endif %}{% endif %} {{inscription.mun_code.description}}" title="{% if language == 'en' %}{{ inscription.genre_propriete.description_anglaise }}{% else %}{{ inscription.genre_propriete.description_francaise }}{% endif %}{% if inscription.prix_demande %}{% if language == 'en' %} for sale{% else %}à vendre{% endif %}{% endif %}{% if inscription.prix_location_demande %}{% if language == 'en' %} for rent{% else %}à louer{% endif %}{% endif %} {{inscription.mun_code.description}}" class="propimg" />
{%endif%}
                            {% endfor %}
                            <p>{% if inscription.prix_location_demande and language == "en" %}
                                ${{inscription.prix_location_demande|floatformat:0|intcomma}}
                            {% elif inscription.prix_location_demande and language == "fr" %}
                                {{inscription.prix_location_demande|floatformat:0|intcomma}}$
                            {%endif%}</p>
                        </span>
                        <div class="rollprop">
                            <p>{% if language == "en" %}
                                {{ inscription.genre_propriete.description_anglaise }}
                            {% else %}
                                {{ inscription.genre_propriete.description_francaise }}
                            {% endif %}
                            {% if inscription.prix_demande %}
                                {% if language == "en" %}
                                    for sale
                                {% else %}
                                    à vendre 
                                {% endif %}
                            {% endif %}
                            {% if inscription.prix_location_demande %}
                                {% if language == "en" %}
                                    for rent
                                {% else %}
                                    à louer
                                {% endif %}
                            {% endif %}</p>
                            <p>{{inscription.mun_code.description}}</p>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <a href="{{ server|server_url }}/{{ language }}/properties/" class="bouton">{{ labels.index.button.four }}</a>
        </div>
    </section>
{% else %}
    <section class="piecesbloc" style="display: flex; justify-content: center; align-items: center;">
        <div class="adressebloc">
            <div class="box_vendu">No properties</div>
        </div>
    </section>
{% endif %}

<section class="profilhome wwuhome">
    <div class="wrap">
        <div class="txt">
            <h2 class="h2def"><span>{{ labels.index.text.fourteen }}</span> {{ labels.index.text.fifteen }}</h2>
            <p>{{ labels.index.text.sixteen }} <br>{{ labels.index.text.seventeen }}<br><br>{{ labels.index.text.eighteen }}</p>
            <a target="_blank" href="https://autisme-montreal.com/en/" class="bouton">{{ labels.index.button.five }}</a>
        </div>
        <div class="img">
            <img src="{% static 'web/images2/autisme.jpg' %}" alt="LJ Immobilier">
        </div>
    </div>
</section>

<div class="avishome">
    <div class="wrap">
        <h2 class="h2def"><span>{{ labels.index.text.nineteen }}</span> {{ labels.index.text.twenty }}</h2>
        <div class="aviscont">
            <div data-romw-token="PZzqTWZUzrgNv4PnX9OJGq3pFaIKjpTUDmgpBRUAl2Qj9nl2dq"></div>
            <script src="https://reviewsonmywebsite.com/js/v2/embed.js?id=fd1f59fcc8467fb2938d974af932af56" type="text/javascript"></script>
        </div>
        <a href="https://www.google.com/search?q=lj+realties&rlz=1C5CHFA_enCA932CA932&oq=lj&aqs=chrome.1.69i57j69i59j46i175i199i512j46i131i433i512j0i512j69i60j69i61l2.3691j0j7&sourceid=chrome&ie=UTF-8#lrd=0x4cc93c824dc00621:0xb6aa87687fd1e9eb,3,,," target="_blank" class="bouton">{{ labels.index.button.six }}</a>
    </div>
</div>

<section class="videoshome">
    <div class="wrap">
        <h2 class="h2def"><span>{{ labels.index.text.twenty_one }}</span> {{ labels.index.text.twenty_two }}</h2>
        <div class="videoshomecont">
            <a href="https://www.youtube.com/watch?v=FO3aCXGQFKY" class="thumbhome">
                <img src="https://img.youtube.com/vi/FO3aCXGQFKY/hqdefault.jpg" alt="Discover Montreal's Top 3 Cyclist-Friendly Neighborhoods">
            </a>
            <a href="https://www.youtube.com/watch?v=4ltyWt_K0Ww" class="thumbhome">
                <img src="https://img.youtube.com/vi/4ltyWt_K0Ww/hqdefault.jpg" alt="From Tranquility to Thriving Communities: South Shore's Top Neighbourhoods">
            </a>
            <a href="https://www.youtube.com/watch?v=LYiWFus8kvU" class="thumbhome">
                <img src="https://img.youtube.com/vi/LYiWFus8kvU/hqdefault.jpg" alt="Maximizing Your Home's Value: The Role of Refinancing">
            </a>
        </div>
        <a href="{{ server|server_url }}/{{ language }}/media/" class="bouton">{{ labels.index.button.seven }}</a>
    </div>
</section>

<section class="soldprop">
    <h2 class="h2def"><span>{{ labels.index.text.one }}</span> {{ labels.index.text.twenty_three }}</h2>
	<div class="soldmap">
		<div id="map-container">
			<div id="map" style="height: 450px; width: 100%"></div>
		</div>
	</div>

	<link rel="stylesheet" href="https://macleweb.com/mapLeaflet/leaflet.css" />
	<link rel="stylesheet" href="https://macleweb.com/mapLeaflet/markercluster/screen.css" />
	<link rel="stylesheet" href="https://macleweb.com/mapLeaflet/markercluster/dist/MarkerCluster.css" />
	<link rel="stylesheet" href="https://macleweb.com/mapLeaflet/markercluster/dist/MarkerCluster.Default.css" />
    <script src="https://macleweb.com/mapLeaflet/leaflet-src.js"></script>
	<script src="https://macleweb.com/mapLeaflet/markercluster/dist/leaflet.markercluster-src.js"></script>

	<script type="text/javascript">

		var point = new Array();

        {% for inscription in inscriptions_vendu %}
            point.push(new Array("{{ inscription.latitude }}", "{{ inscription.longitude }}"));
        {% endfor %}
		// point.push(new Array("46.0326814","-74.2823293"));
		// point.push(new Array("45.533176","-73.558621"));
		// point.push(new Array("45.5167303","-73.5762313"));
		// point.push(new Array("45.4662312","-73.8767149"));
		// point.push(new Array("45.526807","-73.7658951"));
		// point.push(new Array("45.6466628","-73.8200708"));
		// point.push(new Array("45.4713503","-73.87773"));
		// point.push(new Array("45.4969829","-73.8210685"));
		// point.push(new Array("45.665656","-73.585932"));
		// point.push(new Array("45.3891747","-73.9693649"));
		// point.push(new Array("45.5643616","-73.5969474"));
		// point.push(new Array("45.4901901","-73.5588512"));
		// point.push(new Array("45.6530933","-73.5684936"));
		// point.push(new Array("45.392236","-73.5250011"));
		// point.push(new Array("45.6679287","-73.5715094"));
		// point.push(new Array("45.768077","-73.4791027"));
		// point.push(new Array("45.51587800","-73.43196600"));
		// point.push(new Array("45.69069601","-73.49262242"));
		// point.push(new Array("45.33914950","-73.29794714"));
		// point.push(new Array("45.23825900","-74.11898600"));
		// point.push(new Array("45.24622400","-74.15329000"));
		// point.push(new Array("45.67248700","-73.49573900"));
		// point.push(new Array("45.35252400","-73.30334100"));
		// point.push(new Array("45.45685300","-73.78268900"));

		point.forEach(function(pont) {
            console.log("Latitude: " + pont[0] + ", Longitude: " + pont[1]);
        });
		var tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {});
		latlng = L.latLng(45.503121, -73.589550);
		var map = L.map('map', {center: latlng, zoom: 11, layers: [tiles],dragging: !L.Browser.mobile, tap: !L.Browser.mobile});
		var markers = L.markerClusterGroup();

		for (var i = 0; i < point.length; i++) {
			var a = point[i];
			var marker = L.marker(new L.LatLng(a[0], a[1]));
			markers.addLayer(marker);
		}

		map.addLayer(markers);

	</script>

</section>
	

<script type="text/javascript">
    var language = "{{ language }}";
    $(function () {
        $('#reset').click(function(){
            var st= $('input[name="status"]:checked').val();
            // alert("Entro"+st);
            // location.href = '?page='+st
        });

        $(window).click(function() {
            $("#fserach").val('')
        });
        $("#fserach").autocomplete({
            minLength: 3,
            autoFocus: true,
            source: function (request, response) {
                var status = $('input[name=status]:checked'). val();
                $.ajax({
                    type: 'GET',
                    url: "{% url 'web:searchpropriete' %}",
                    dataType: "json",
                    data: {
                        term: request.term,
                        status: status,
                    },
                    success: function(data) {
                        response(data);
                    }
                });
            },
            select: function (event, data) {
                if (data.item.categorie == 2) {
                $('#freeform-filters ul').prepend('<li><a href="#">' + data.item.value + '</a><input type="hidden" name="adress[mun][]" value="' + data.item.id + '" ></li>');
            }
            if (data.item.categorie == 3) {
                $('#freeform-filters ul').prepend('<li><a href="#">' + data.item.value + '</a><input type="hidden" name="adress[ville][]" value="' + data.item.id + '" ></li>');
            }
            if (data.item.categorie == 1) {
                $('#freeform-filters ul').prepend('<li><a href="#">' + data.item.value + '</a><input type="hidden" name="adress[region][]" value="' + data.item.id + '" ></li>');
            }
            if (data.item.categorie == 4) {
                if (language == "en") {
                    location.href = "/en/propriete/" + data.item.id + "/";
                } else {
                    location.href = "/fr/propriete/" + data.item.id + "/";
                }
            }
                $('#freeform-filters ul li').click(function (e) {
                    e.preventDefault();
                    $(this).remove();
                });
                event.target.value = '';
                // stop la propagation de l'évènement
                return false;
            }
        });
        $('#freeform-filters ul li').click(function (e) {
            e.preventDefault();
            $(this).remove();
        });
    });
</script>


{% load static %}{% include 'web/footer_web.html' %}

